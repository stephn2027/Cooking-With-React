{"ast":null,"code":"import _toConsumableArray from\"/Users/kor/rmetest/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/kor/rmetest/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{v4 as uuidv4}from\"uuid\";import firebase from'../Base';import RecipeList from\"./RecipeList\";import RecipeEdit from\"./RecipeEdit\";import\"../css/app.css\";//the only css import that connects different css components\n//used to propagate state to all levels of code. no need to transfer data in a stair like pattern\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var RecipeContext=/*#__PURE__*/React.createContext();var LOCAL_STORAGE_KEY='cookingWithReact.App[recipes]';//just a string name for your local key\nexport default function App(){var _useState=useState(sampleRecipes),_useState2=_slicedToArray(_useState,2),recipes=_useState2[0],setRecipes=_useState2[1];//state for recipes\nvar _useState3=useState(),_useState4=_slicedToArray(_useState3,2),selectedRecipeId=_useState4[0],setSelectedRecipeId=_useState4[1];//state for selected item to propagate to edit page\nvar selectedRecipe=recipes.find(function(recipe){return recipe.id===selectedRecipeId;});//id of recipe that is selected or if there is one selected\nvar recipeContextValue={//context value that will be passed on diff. levels of nested components\nhandleRecipeAdd:handleRecipeAdd,handleRecipeDelete:handleRecipeDelete,handleRecipeSelect:handleRecipeSelect,handleRecipeChange:handleRecipeChange};useEffect(function(){firebase.database().ref('recipes')// Sync the data.\n.on('value',function(snapshot){if(snapshot.val())setRecipes(snapshot.val());});},[]);useEffect(function(){firebase.database().ref('recipes').set(recipes);firebase.database().ref('recipes').update(recipes);},[recipes]);//persisting our local storage by using useEffect\nuseEffect(function(){var recipeKeyFromLocalStorage=localStorage.getItem(LOCAL_STORAGE_KEY);recipeKeyFromLocalStorage===null?alert(\"no data in local storage\"):setRecipes(JSON.parse(recipeKeyFromLocalStorage));},[]);useEffect(function(){localStorage.setItem(LOCAL_STORAGE_KEY,JSON.stringify(recipes));},[recipes]);function handleRecipeSelect(id){setSelectedRecipeId(id);}function handleRecipeChange(id,recipe){var newRecipes=_toConsumableArray(recipes);var index=newRecipes.findIndex(function(r){return r.id===id;});newRecipes[index]=recipe;setRecipes(newRecipes);}function handleRecipeAdd(){var newRecipe={id:uuidv4(),name:\"\",cookTime:\"\",servings:1,instructions:\"\",ingredients:[{id:uuidv4(),name:\"\",amount:\"\"}],authors:[{id:uuidv4(),name:\"\"}]};setSelectedRecipeId(newRecipe.id);setRecipes([].concat(_toConsumableArray(recipes),[newRecipe]));}function handleRecipeDelete(id){if(selectedRecipeId!=null&&selectedRecipeId===id){setSelectedRecipeId(null);}setRecipes(recipes.filter(function(recipe){return recipe.id!==id;}));}return/*#__PURE__*/_jsx(\"div\",{className:\"background\",children:/*#__PURE__*/_jsxs(RecipeContext.Provider,{value:recipeContextValue,children:[/*#__PURE__*/_jsx(RecipeList,{recipes:recipes}),selectedRecipe&&/*#__PURE__*/_jsx(RecipeEdit,{recipe:selectedRecipe})]})});}var sampleRecipes=[{id:uuidv4(),name:\"Plain Chiken\",cookTime:\"1:45\",servings:\"3\",instructions:\"1.Put salt on chicken \\n 2.Put chicken inside the oven \\n3.Garnish with greens and serve\",ingredients:[{id:uuidv4(),name:\"Chicken\",amount:\"2 pounds\"},{id:uuidv4(),name:\"Salt\",amount:\"1 tsp\"}],authors:[{id:uuidv4(),name:\"Chef Robert\"}]},{id:uuidv4(),name:\"Pork Chop\",cookTime:\"2:45\",servings:\"2\",instructions:\"1.Put salt on pork \\n 2.Put put inside the oven \\n 3.Garnish with greens and serve\",ingredients:[{id:uuidv4(),name:\"Pork\",amount:\"3 pounds\"},{id:uuidv4(),name:\"Paprika\",amount:\"1 tsp\"}],authors:[{id:uuidv4(),name:\"Chef John\"}]}];","map":{"version":3,"sources":["/Users/kor/rmetest/src/components/App.js"],"names":["React","useState","useEffect","v4","uuidv4","firebase","RecipeList","RecipeEdit","RecipeContext","createContext","LOCAL_STORAGE_KEY","App","sampleRecipes","recipes","setRecipes","selectedRecipeId","setSelectedRecipeId","selectedRecipe","find","recipe","id","recipeContextValue","handleRecipeAdd","handleRecipeDelete","handleRecipeSelect","handleRecipeChange","database","ref","on","snapshot","val","set","update","recipeKeyFromLocalStorage","localStorage","getItem","alert","JSON","parse","setItem","stringify","newRecipes","index","findIndex","r","newRecipe","name","cookTime","servings","instructions","ingredients","amount","authors","filter"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport firebase from '../Base';\n\nimport RecipeList from \"./RecipeList\";\nimport RecipeEdit from \"./RecipeEdit\";\n\nimport \"../css/app.css\"; //the only css import that connects different css components\n\n\n\n\n//used to propagate state to all levels of code. no need to transfer data in a stair like pattern\nexport const RecipeContext = React.createContext();\nconst LOCAL_STORAGE_KEY = 'cookingWithReact.App[recipes]';//just a string name for your local key\n\nexport default function App() {\n  const [recipes, setRecipes] = useState(sampleRecipes);//state for recipes\n  const [selectedRecipeId, setSelectedRecipeId] = useState();//state for selected item to propagate to edit page\n  const selectedRecipe = recipes.find(recipe=>recipe.id === selectedRecipeId); //id of recipe that is selected or if there is one selected\n  \n  \n  \n \n  const recipeContextValue ={//context value that will be passed on diff. levels of nested components\n    handleRecipeAdd,\n    handleRecipeDelete,\n    handleRecipeSelect,\n    handleRecipeChange,\n    \n  };\n\n  useEffect(()=>{\n    firebase.database().ref('recipes')\n        // Sync the data.\n        .on('value', snapshot => {\n            if (snapshot.val())\n                setRecipes(snapshot.val());\n        });\n  },[]);\n\n  useEffect(() => {\n    firebase.database().ref('recipes').set(recipes)\n    firebase.database().ref('recipes').update(recipes)\n }, [recipes])\n  \n  //persisting our local storage by using useEffect\n\n  useEffect(()=>{\n    const recipeKeyFromLocalStorage =  localStorage.getItem(LOCAL_STORAGE_KEY);\n    recipeKeyFromLocalStorage===null?alert(\"no data in local storage\"):setRecipes(JSON.parse(recipeKeyFromLocalStorage));\n  },[]);\n\n  useEffect(()=>{\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(recipes));\n  },[recipes]);\n\n  \n\n  function handleRecipeSelect(id){\n    setSelectedRecipeId(id);\n    }\n\n  function handleRecipeChange(id,recipe){\n    const newRecipes = [...recipes];\n    const index = newRecipes.findIndex(r=>r.id === id);\n    newRecipes[index] = recipe;\n    setRecipes(newRecipes);\n  }\n  \n\n  \n  function handleRecipeAdd() {\n    const newRecipe = {\n      id: uuidv4(),\n      name: \"\",\n      cookTime: \"\",\n      servings: 1,\n      instructions: \"\",\n      ingredients: [\n        {\n          id: uuidv4(),\n          name: \"\",\n          amount: \"\",\n        },\n      ],\n      authors:[\n        {\n          id: uuidv4(),\n          name:\"\",\n        }\n      ]\n    };\n    setSelectedRecipeId(newRecipe.id);\n    setRecipes([...recipes, newRecipe]);\n  }\n  function handleRecipeDelete(id){\n    if(selectedRecipeId != null && selectedRecipeId === id){\n      setSelectedRecipeId(null);\n    }\n\n    setRecipes(recipes.filter(recipe=>recipe.id!==id))\n  }\n  \n\n  return (\n    <div className=\"background\" >\n  <RecipeContext.Provider value={recipeContextValue}>\n      \n      <RecipeList recipes={recipes} /> \n      \n      {selectedRecipe && <RecipeEdit recipe = {selectedRecipe}/>}\n     \n  </RecipeContext.Provider>\n  </div>\n  )\n}\n\nconst sampleRecipes = [\n  {\n    id: uuidv4(),\n    name: \"Plain Chiken\",\n    cookTime: \"1:45\",\n    servings: \"3\",\n    instructions: `1.Put salt on chicken \\n 2.Put chicken inside the oven \\n3.Garnish with greens and serve`,\n    ingredients: [\n      {\n        id: uuidv4(),\n        name: \"Chicken\",\n        amount: \"2 pounds\",\n      },\n      {\n        id: uuidv4(),\n        name: \"Salt\",\n        amount: \"1 tsp\",\n      },\n    ],\n    authors: [\n      {\n        id: uuidv4(),\n        name: \"Chef Robert\",\n        \n      },\n      \n    ],\n  },\n  {\n    id: uuidv4(),\n    name: \"Pork Chop\",\n    cookTime: \"2:45\",\n    servings: \"2\",\n    instructions:\n      \"1.Put salt on pork \\n 2.Put put inside the oven \\n 3.Garnish with greens and serve\",\n    ingredients: [\n      {\n        id: uuidv4(),\n        name: \"Pork\",\n        amount: \"3 pounds\",\n      },\n      {\n        id: uuidv4(),\n        name: \"Paprika\",\n        amount: \"1 tsp\",\n      },\n    ],\n    authors: [\n      {\n        id: uuidv4(),\n        name: \"Chef John\",\n        \n      },\n      \n    ],\n  },\n];\n\n"]},"metadata":{},"sourceType":"module"}